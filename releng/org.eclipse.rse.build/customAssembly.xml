<!--
     Copyright (c) 2008, 2010 IBM Corporation and others.
     All rights reserved. This program and the accompanying materials
     are made available under the terms of the Eclipse Public License v1.0
     which accompanies this distribution, and is available at
     http://www.eclipse.org/legal/epl-v10.html
    
     Contributors:
         IBM Corporation - initial API and implementation
 -->
<project name="Build specific targets and properties" default="noDefault">

	<!-- =====================================================================
	    
	    The Following Properties are available in all targets:
		 - eclipse.base : the base folder everything will be collected into
		 - eclipse.plugins : the plugins folder
		 - eclipse.features: the features folder
		 - archiveFullPath : the full path of the final archive once it is created
		 
		 ===================================================================== -->
		 
	<!-- =====================================================================  -->
	<!-- Called after each invocation of the gather.bin.parts target on the     -->
	<!-- individual plugins and features.                                       -->
	<!-- Available properties are:                                              -->
	<!--   projectLocation: location of the project being gathered              -->
	<!--   projectName: symbolic name with version (org.eclipse.foo_1.0.0.v123) -->
	<!--   target.folder: the destination, eclipse/plugins or eclipse/features  -->
	<!--                                                                        -->
	<!-- The generated pattern is that plugins/features are gathered into the   -->
	<!-- folder ${target.folder}/${projectName}                                 -->
	<!-- =====================================================================  -->
	<target name="gather.bin.parts">	
	</target>

	
	<!-- ===================================================================== -->
	<!-- Called after invoking the gather.bin.parts targets for all plugins    -->
	<!-- and features. Results exist as folders and have not yet been jarred.  -->
	<!-- ===================================================================== -->
	<target name="post.gather.bin.parts">
		<!-- <target name="hideServerStuff"> -->
			<mkdir dir="${buildDirectory}/hidden"/>
			<move todir="${buildDirectory}/hidden">
				<fileset dir="${buildDirectory}/plugins">
					<include name="**/clientserver.jar"/>
					<include name="**/dstore_core.jar"/>
					<include name="**/dstore_extra_server.jar"/>
					<include name="**/dstore_miners.jar"/>
					<include name="**/clientserversrc.zip"/>
					<include name="**/dstore_coresrc.zip"/>
					<include name="**/dstore_extra_serversrc.zip"/>
					<include name="**/dstore_minerssrc.zip"/>
				</fileset>
			</move>
			<mkdir dir="${buildDirectory}/hidden.tmp"/>
			<move todir="${buildDirectory}/hidden.tmp">
				<fileset dir="${buildDirectory}/tmp">
					<include name="**/clientserver.jar"/>
					<include name="**/dstore_core.jar"/>
					<include name="**/dstore_extra_server.jar"/>
					<include name="**/dstore_miners.jar"/>
					<include name="**/clientserversrc.zip"/>
					<include name="**/dstore_coresrc.zip"/>
					<include name="**/dstore_extra_serversrc.zip"/>
					<include name="**/dstore_minerssrc.zip"/>
				</fileset>
			</move>
		<!-- </target> -->
	</target>

	<!-- ===================================================================== -->
	<!-- Called just prior to signing a jar                                    -->
	<!-- In addititon to the properties listed above:						   -->
	<!--    - source : plugins or features directory                           -->
	<!--    - elementName: element being signed without .jar                   -->
	<!--                   (eg "org.eclipse.foo_1.0.0"                         -->
	<!-- ===================================================================== -->
	<target name="pre.jarSigning">
	</target>

	<!-- ===================================================================== -->
	<!-- Called after all plugins and features have been jarred                -->
	<!-- (and potentially signed)                                              -->
	<!-- ===================================================================== -->
	<target name="post.jarUp">
		<!-- <target name="revealServerStuff"> -->
			<move todir="${buildDirectory}/tmp">
				<fileset dir="${buildDirectory}/hidden.tmp" includes="**" />
			</move>
			<delete dir="${buildDirectory}/hidden.tmp"/>
			<move todir="${buildDirectory}/plugins">
				<fileset dir="${buildDirectory}/hidden" includes="**" />
			</move>
			<delete dir="${buildDirectory}/hidden"/>
		<!-- </target> -->
	</target>

	<!-- ===================================================================== -->
	<!-- Called just before the archive file is built                          -->
	<!-- In addititon to the properties listed above:						   -->
	<!--    - rootFolder : the folder containing the root files                -->
	<!-- ===================================================================== -->
	<target name="pre.archive">
	</target>
	
	<!-- ===================================================================== -->
	<!-- Default target                                                        -->
	<!-- ===================================================================== -->
	<target name="noDefault">
		<echo message="You must specify a target when invoking this file" />
	</target>

</project>
